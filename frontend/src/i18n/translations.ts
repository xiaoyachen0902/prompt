export type Locale = "zh" | "en";

export const translations: Record<Locale, Record<string, string>> = {
  zh: {
    "app.title": "Prompt Debug",
    "app.subtitle": "AI Agent 工作流平台",
    "nav.templates": "模板",
    "nav.manageTemplates": "管理模板",
    "nav.newAgent": "新建 Agent",
    "nav.agents": "Agents",
    "nav.recentRuns": "最近运行",
    "nav.lang": "语言",
    "agents.emptyTitle": "还没有 Agent",
    "agents.emptyDesc": "创建你的第一个 AI Agent 工作流，用于调试和优化 Prompt。",
    "agents.browseTemplates": "浏览模板",
    "agents.createAgent": "创建 Agent",
    "agents.steps": "步骤",
    "agents.edit": "编辑",
    "agents.run": "运行",
    "agents.view": "查看",
    "runs.emptyTitle": "还没有运行记录",
    "runs.emptyDesc": "运行一个 Agent 后，执行历史会显示在这里。",
    "template.dialogTitle": "Agent 模板",
    "template.previewTitle": "预览模板",
    "template.reviewDesc": "创建前确认",
    "template.startDesc": "从预置工作流开始",
    "template.all": "全部",
    "template.stepsCount": "步骤",
    "template.useCases": "适用场景",
    "template.exampleInput": "示例输入",
    "template.back": "返回",
    "template.createAgent": "创建 Agent",
    "templateManage.title": "管理模板",
    "templateManage.categories": "分类",
    "templateManage.templates": "自定义模板",
    "templateManage.addCategory": "添加分类",
    "templateManage.editCategory": "编辑分类",
    "templateManage.addTemplate": "添加模板",
    "templateManage.editTemplate": "编辑模板",
    "templateManage.categoryNamePlaceholder": "分类名称",
    "templateManage.templateName": "模板名称",
    "templateManage.templateNamePlaceholder": "输入模板名称",
    "templateManage.description": "描述",
    "templateManage.descriptionPlaceholder": "简要描述该模板的用途",
    "templateManage.steps": "步骤",
    "templateManage.addStep": "添加步骤",
    "templateManage.step": "步骤",
    "templateManage.stepNamePlaceholder": "步骤名称",
    "templateManage.stepPromptPlaceholder": "提示词模板（可用 {{变量名}}）",
    "templateManage.save": "保存",
    "templateManage.saved": "已保存",
    "templateManage.categoryAdded": "分类已添加",
    "templateManage.templateAdded": "模板已添加",
    "templateManage.noCategories": "暂无分类，请先添加分类。",
    "templateManage.noTemplates": "暂无自定义模板。",
    "templateManage.templateCount": "个模板",
    "templateManage.category": "分类",
    "templateManage.deleteCategoryConfirm": "确定删除分类「{{name}}」？其下模板将一并删除。",
    "templateManage.deleteTemplateConfirm": "确定删除模板「{{name}}」？",
    "templateManage.fillRequired": "请填写名称、描述并至少添加一个有效步骤。",
    "templateManage.builtinCategories": "内置分类",
    "templateManage.customCategories": "自定义分类",
    "agents.copy": "复制",
    "confirm.cancel": "取消",
    "confirm.delete": "删除",
    "confirm.deleteAgent": "删除 Agent？",
    "confirm.deleteRun": "删除整条运行？",
    "confirm.deleteDesc": "确定要删除「{{name}}」吗？此操作不可恢复。",
    "confirm.batchDeleteAgents": "确定要删除选中的 {{n}} 个 Agent？",
    "confirm.batchDeleteRuns": "确定要删除选中的 {{n}} 条运行？每条运行将整体删除（含所有步骤与结果）。",
    "confirm.cannotUndo": "此操作不可恢复。",
    "confirm.deleted": "已删除",
    "agents.selectAll": "全选",
    "agents.batchDelete": "批量删除",
    "common.loading": "加载中…",
    "common.loadError": "加载失败",
    "editor.agentNamePlaceholder": "Agent 名称",
    "editor.save": "Save",
    "editor.run": "Run",
    "editor.saving": "保存中…",
    "editor.running": "运行中…",
    "editor.back": "返回",
    "editor.newAgent": "New Agent",
    "toast.saveSuccess": "保存成功",
    "toast.saveFailed": "保存失败",
    "toast.runStart": "已开始运行",
    "toast.runFailed": "运行失败",
    "toast.createAndRun": "正在创建并运行…",
    "toast.running": "正在运行…",
    "toast.replayStart": "开始重放...",
    "toast.replayExec": "正在执行 Agent，请稍候",
    "toast.replaySuccess": "重放成功！",
    "toast.replayCreated": "已创建新的运行记录",
    "toast.replayFailed": "重放失败",
    "toast.shareCopied": "链接已复制！",
    "toast.shareCopiedDesc": "分享链接已复制到剪贴板",
    "toast.shareFailed": "分享失败",
    "toast.rateSaved": "评分已保存",
    "toast.rateFailed": "评分失败",
    "toast.noteSaved": "备注已保存",
    "toast.unknownError": "未知错误",
    "flow.editStep": "编辑 Step",
    "flow.name": "名称",
    "flow.stepNamePlaceholder": "Step 名称",
    "flow.prompt": "Prompt",
    "flow.advanced": "高级",
    "flow.advancedHide": "隐藏",
    "flow.addStep": "添加 Step",
    "flow.stepN": "步骤 {{n}}",
    "flow.variableLabel": "可替换变量：",
    "flow.variableDesc": "需要「每次运行或每一步结果」替换成不同内容时，写成 {{变量名}}，运行时会让你填写或自动带入上一步输出。例如 {{name}}、{{主题}}。",
    "flow.model": "模型",
    "flow.modelCustom": "自定义模型 ID",
    "flow.modelCustomPlaceholder": "输入模型 ID，如 deepseek-chat、gemini-1.5-pro",
    "flow.cancel": "取消",
    "flow.save": "保存",
    "flow.clickNodeHint": "点击左侧节点编辑",
    "flow.branchHint": "从节点底部拖出连线到另一节点顶部可做分支",
    "flow.branchTip": "从节点底部拖出连线到另一节点顶部，可形成分支（一个 Step 连到多个下一步）",
    "flow.outcomeBranch": "结果与分支",
    "flow.stepType": "步骤类型",
    "flow.stepTypeAction": "执行",
    "flow.stepTypeReflection": "反思（仅评估，不进入上下文）",
    "flow.afterStepDefault": "完成后默认",
    "flow.actionContinue": "继续",
    "flow.actionRetry": "重试（最多 3 次）",
    "flow.actionSkipNext": "跳过下一步",
    "flow.actionBranch": "分支",
    "flow.actionStop": "提前结束",
    "flow.decisionPromptLabel": "决策 Prompt（可选）",
    "flow.decisionPromptPlaceholder": "例如：根据输出回复 CONTINUE、RETRY、SKIP_NEXT、STOP 或 BRANCH <步骤序号>",
    "flow.conditionLabel": "条件（if/else，可选）",
    "flow.conditionIf": "若",
    "flow.conditionThen": "则",
    "flow.conditionElse": "否则",
    "flow.conditionIfPlaceholder": "例如：output 包含 error",
    "flow.allStepsPreview": "所有步骤预览",
    "runView.evaluation": "评估",
    "runView.nextAction": "下一步：",
    "runView.nextStep": "→ 步骤 {{n}}",
    "runView.compare": "对比",
    "runView.share": "分享",
    "runView.replay": "重放",
    "runView.generating": "生成中…",
    "runView.copied": "已复制",
    "runView.replaying": "重放中…",
    "runView.replayFromHere": "从此处重放",
    "runView.shareLink": "分享链接",
    "runView.compareRuns": "对比运行",
    "runView.timeline": "时间线",
    "runView.output": "输出",
    "runView.prompt": "提示词",
    "runView.inputContext": "输入上下文",
    "runView.selectStep": "选择步骤",
    "runView.summary": "摘要",
    "runView.tokens": "词数",
    "runView.cost": "费用",
    "runView.latency": "耗时",
    "runView.rating": "评分",
    "runView.notesTags": "备注与标签",
    "runView.addNotes": "添加备注…",
    "runView.tagsPlaceholder": "标签（逗号分隔）",
    "runView.linkCopied": "✓ 链接已复制",
    "runView.save": "保存",
    "runView.saving": "保存中...",
    "runView.loading": "加载运行中…",
    "runView.replayRun": "重放运行",
    "runView.skipped": "已跳过",
    "runView.decisionTrace": "决策追踪",
    "runView.decisionType": "决策类型",
    "runView.stopReason": "停止原因",
    "runView.checkPass": "检查通过",
    "runView.checkWarn": "检查未通过",
    "runView.branchTo": "→ 步骤 {{n}}",
    "compare.title": "Compare runs",
    "compare.compareWith": "Compare with",
    "compare.selectRun": "Select run",
    "compare.prompt": "Prompt",
    "compare.output": "Output",
    "compare.close": "Close",
    "compare.outputDiff": "输出对比",
    "compare.promptDiff": "Prompt 对比",
    "compare.sameStepNotFound": "该步骤在两次运行中未同时存在。",
    "shared.loading": "Loading…",
    "shared.steps": "Steps",
    "shared.shared": "Shared",
    "template.category.professional": "工作",
    "template.category.learning": "学习",
    "template.category.code": "开发",
    "template.category.travel": "生活旅游",
    "template.category.advanced": "高级分析",
    "template.category.creative": "创意",
  },
  en: {
    "app.title": "Prompt Debug",
    "app.subtitle": "AI Agent Workflow Platform",
    "nav.templates": "Templates",
    "nav.manageTemplates": "Manage templates",
    "nav.newAgent": "New Agent",
    "nav.agents": "Agents",
    "nav.recentRuns": "Recent Runs",
    "nav.lang": "Language",
    "agents.emptyTitle": "No agents yet",
    "agents.emptyDesc": "Create your first AI agent workflow to debug and optimize prompts.",
    "agents.browseTemplates": "Browse Templates",
    "agents.createAgent": "Create Agent",
    "agents.steps": "steps",
    "agents.edit": "Edit",
    "agents.run": "Run",
    "agents.view": "View",
    "runs.emptyTitle": "No runs yet",
    "runs.emptyDesc": "Run an agent to see execution history here.",
    "template.dialogTitle": "Agent Templates",
    "template.previewTitle": "Preview Template",
    "template.reviewDesc": "Review before creating",
    "template.startDesc": "Start with a pre-built workflow",
    "template.all": "All",
    "template.stepsCount": "steps",
    "template.useCases": "Use cases",
    "template.exampleInput": "Example input",
    "template.back": "Back",
    "template.createAgent": "Create Agent",
    "templateManage.title": "Manage Templates",
    "templateManage.categories": "Categories",
    "templateManage.templates": "Custom Templates",
    "templateManage.addCategory": "Add category",
    "templateManage.editCategory": "Edit category",
    "templateManage.addTemplate": "Add template",
    "templateManage.editTemplate": "Edit template",
    "templateManage.categoryNamePlaceholder": "Category name",
    "templateManage.templateName": "Template name",
    "templateManage.templateNamePlaceholder": "Template name",
    "templateManage.description": "Description",
    "templateManage.descriptionPlaceholder": "Brief description",
    "templateManage.steps": "Steps",
    "templateManage.addStep": "Add step",
    "templateManage.step": "Step",
    "templateManage.stepNamePlaceholder": "Step name",
    "templateManage.stepPromptPlaceholder": "Prompt template (use {{variable}})",
    "templateManage.save": "Save",
    "templateManage.saved": "Saved",
    "templateManage.categoryAdded": "Category added",
    "templateManage.templateAdded": "Template added",
    "templateManage.noCategories": "No categories yet. Add one first.",
    "templateManage.noTemplates": "No custom templates yet.",
    "templateManage.templateCount": "templates",
    "templateManage.category": "Category",
    "templateManage.deleteCategoryConfirm": "Delete category \"{{name}}\"? Its templates will be deleted too.",
    "templateManage.deleteTemplateConfirm": "Delete template \"{{name}}\"?",
    "templateManage.fillRequired": "Please fill name, description and at least one step.",
    "templateManage.builtinCategories": "Built-in categories",
    "templateManage.customCategories": "Custom categories",
    "agents.copy": "Copy",
    "confirm.cancel": "Cancel",
    "confirm.delete": "Delete",
    "confirm.deleteAgent": "Delete Agent?",
    "confirm.deleteRun": "Delete this run?",
    "confirm.deleteDesc": "Are you sure you want to delete \"{{name}}\"? This action cannot be undone.",
    "confirm.batchDeleteAgents": "Delete {{n}} selected agents?",
    "confirm.batchDeleteRuns": "Delete {{n}} selected runs? Each run is removed entirely (all steps and results).",
    "confirm.cannotUndo": "This action cannot be undone.",
    "confirm.deleted": "Deleted",
    "agents.selectAll": "Select all",
    "agents.batchDelete": "Batch delete",
    "common.loading": "Loading…",
    "common.loadError": "Failed to load",
    "editor.agentNamePlaceholder": "Agent name",
    "editor.save": "Save",
    "editor.run": "Run",
    "editor.saving": "Saving…",
    "editor.running": "Running…",
    "editor.back": "Back",
    "editor.newAgent": "New Agent",
    "toast.saveSuccess": "Saved successfully",
    "toast.saveFailed": "Save failed",
    "toast.runStart": "Run started",
    "toast.runFailed": "Run failed",
    "toast.createAndRun": "Creating and running…",
    "toast.running": "Running…",
    "toast.replayStart": "Replay started...",
    "toast.replayExec": "Executing agent, please wait",
    "toast.replaySuccess": "Replay succeeded!",
    "toast.replayCreated": "New run created",
    "toast.replayFailed": "Replay failed",
    "toast.shareCopied": "Link copied!",
    "toast.shareCopiedDesc": "Share link copied to clipboard",
    "toast.shareFailed": "Share failed",
    "toast.rateSaved": "Rating saved",
    "toast.rateFailed": "Rating failed",
    "toast.noteSaved": "Note saved",
    "toast.copySuccess": "Copied. Opening new agent.",
    "toast.unknownError": "Unknown error",
    "flow.editStep": "Edit Step",
    "flow.name": "Name",
    "flow.stepNamePlaceholder": "Step name",
    "flow.prompt": "Prompt",
    "flow.advanced": "Advanced",
    "flow.advancedHide": "Hide",
    "flow.addStep": "Add Step",
    "flow.stepN": "Step {{n}}",
    "flow.variableLabel": "Replaceable variables: ",
    "flow.variableDesc": "Use {{variableName}} for content that changes per run or from previous step output. E.g. {{name}}, {{topic}}.",
    "flow.model": "Model",
    "flow.modelCustom": "Custom model ID",
    "flow.modelCustomPlaceholder": "e.g. deepseek-chat, gemini-1.5-pro",
    "flow.cancel": "Cancel",
    "flow.save": "Save",
    "flow.clickNodeHint": "Click a node to edit",
    "flow.branchHint": "Drag from node bottom to another node top to add branches",
    "flow.branchTip": "Drag from node bottom to another node top to create branches (one step to multiple next steps)",
    "flow.outcomeBranch": "Outcome / Branch",
    "flow.stepType": "Step type",
    "flow.stepTypeAction": "Action",
    "flow.stepTypeReflection": "Reflection (eval only, not in context)",
    "flow.afterStepDefault": "After step (default)",
    "flow.actionContinue": "Continue",
    "flow.actionRetry": "Retry (max 3)",
    "flow.actionSkipNext": "Skip next",
    "flow.actionBranch": "Branch",
    "flow.actionStop": "Stop (early)",
    "flow.decisionPromptLabel": "Decision prompt (optional)",
    "flow.decisionPromptPlaceholder": "e.g. Based on output, reply with one of: CONTINUE, RETRY, SKIP_NEXT, STOP, or BRANCH <stepIndex>",
    "flow.conditionLabel": "Condition (if/else, optional)",
    "flow.conditionIf": "if",
    "flow.conditionThen": "then",
    "flow.conditionElse": "else",
    "flow.conditionIfPlaceholder": "e.g. output contains error",
    "flow.allStepsPreview": "All steps preview",
    "runView.evaluation": "Evaluation",
    "runView.nextAction": "Next:",
    "runView.nextStep": "→ step {{n}}",
    "runView.compare": "Compare",
    "runView.share": "Share",
    "runView.replay": "Replay",
    "runView.generating": "Generating...",
    "runView.copied": "Copied!",
    "runView.replaying": "Replaying...",
    "runView.replayFromHere": "Replay from here",
    "runView.shareLink": "Share link",
    "runView.compareRuns": "Compare runs",
    "runView.timeline": "Timeline",
    "runView.output": "Output",
    "runView.prompt": "Prompt",
    "runView.inputContext": "Input context",
    "runView.selectStep": "Select a step",
    "runView.summary": "Summary",
    "runView.tokens": "Tokens",
    "runView.cost": "Cost",
    "runView.latency": "Latency",
    "runView.rating": "Rating",
    "runView.notesTags": "Notes & Tags",
    "runView.addNotes": "Add notes...",
    "runView.tagsPlaceholder": "Tags (comma-separated)",
    "runView.linkCopied": "✓ Link copied!",
    "runView.save": "Save",
    "runView.saving": "Saving...",
    "runView.loading": "Loading run…",
    "runView.replayRun": "Replay run",
    "runView.skipped": "Skipped",
    "runView.decisionTrace": "Decision trace",
    "runView.decisionType": "Decision type",
    "runView.stopReason": "Stop reason",
    "runView.checkPass": "Checks passed",
    "runView.checkWarn": "Checks failed",
    "runView.branchTo": "→ step {{n}}",
    "compare.title": "Compare runs",
    "compare.compareWith": "Compare with",
    "compare.selectRun": "Select run",
    "compare.prompt": "Prompt",
    "compare.output": "Output",
    "compare.close": "Close",
    "compare.outputDiff": "Output diff",
    "compare.promptDiff": "Prompt diff",
    "compare.sameStepNotFound": "Same step not found in both runs for this index.",
    "shared.loading": "Loading…",
    "shared.steps": "Steps",
    "shared.shared": "Shared",
    "template.category.professional": "Work",
    "template.category.learning": "Learning",
    "template.category.code": "Code",
    "template.category.travel": "Life & Travel",
    "template.category.advanced": "Advanced",
    "template.category.creative": "Creative",
  },
};

function interpolate(text: string, vars: Record<string, string>): string {
  let out = text;
  for (const [k, v] of Object.entries(vars)) {
    out = out.replace(new RegExp(`\\{\\{${k}\\}\\}`, "g"), v);
  }
  return out;
}

export function t(locale: Locale, key: string, vars?: Record<string, string>): string {
  const str = translations[locale][key] ?? key;
  return vars ? interpolate(str, vars) : str;
}
